{
  "version": "1.0",
  "id": "crystalCaverns",
  "name": "Crystal Caverns",
  "width": 30,
  "height": 30,
  "properties": {
    "music": "crystal_caverns_theme",
    "ambience": "dripping_water",
    "spawnPoint": {
      "x": 5,
      "y": 5
    }
  },
  "layers": [
    {
      "name": "base",
      "type": "tilelayer",
      "width": 30,
      "height": 30,
      "data": [
        2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
        2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
        2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
        2, 2, 2, 1, 1, 1, 5, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
        2, 2, 2, 1, 4, 4, 4, 4, 4, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
        2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
        2, 2, 2, 1, 4, 4, 4, 4, 4, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
        2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
        2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
        2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 5, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2,
        2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
        2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2,
        2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2
      ],
      "tileTypes": [
        { "id": 0, "name": "empty" },
        { "id": 1, "name": "dungeon_floor" },
        { "id": 2, "name": "wall" },
        { "id": 3, "name": "water" },
        { "id": 4, "name": "path" },
        { "id": 5, "name": "exit" },
        { "id": 6, "name": "crystal" }
      ]
    },
    {
      "name": "collision",
      "type": "tilelayer",
      "width": 30,
      "height": 30,
      "data": [
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
        0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0
      ],
      "tileTypes": [
        { "id": 0, "name": "walkable" },
        { "id": 1, "name": "blocked" }
      ]
    },
    {
      "name": "objects",
      "type": "objectgroup",
      "objects": [
        {
          "id": "crystalMiner",
          "type": "npc",
          "x": 6,
          "y": 6,
          "properties": {
            "dialogue": "Welcome to the Crystal Caverns! Need any gear?",
            "role": "merchant",
            "inventory": ["mining_pick", "lantern", "rope"]
          }
        },
        {
          "id": "pickaxePete",
          "type": "npc",
          "x": 8,
          "y": 4,
          "properties": {
            "dialogue": "My tools are the best in the business, guaranteed!",
            "role": "merchant",
            "inventory": ["heavy_pickaxe", "dynamite"]
          }
        },
        {
          "id": "subterraneanScout",
          "type": "npc",
          "x": 7,
          "y": 8,
          "properties": {
            "dialogue": "Watch your step, the deeper you go, the more dangerous it gets.",
            "role": "guard"
          }
        },
        {
          "id": "gemAppraiser",
          "type": "npc",
          "x": 14,
          "y": 12,
          "properties": {
            "dialogue": "Each crystal tells a story. Let me tell you about them.",
            "role": "scholar"
          }
        },
        {
          "id": "crystalCollector",
          "type": "npc",
          "x": 16,
          "y": 15,
          "properties": {
            "dialogue": "I'm looking for a rare 'Heartstone Crystal'. Can you find it?",
            "role": "quest_giver",
            "quest": {
              "id": "heartstoneQuest",
              "name": "The Heartstone's Glow",
              "description": "Find the legendary Heartstone Crystal.",
              "objective": "Retrieve Heartstone Crystal",
              "reward": "rare_gem"
            }
          }
        },
        {
          "id": "lostExplorer",
          "type": "npc",
          "x": 7,
          "y": 14,
          "properties": {
            "dialogue": "I'm lost! My compass broke. Can you guide me out?",
            "role": "quest_giver",
            "quest": {
              "id": "lostExplorerQuest",
              "name": "Wayward Wanderer",
              "description": "Help the Lost Explorer find his way back to the entrance.",
              "objective": "Escort Lost Explorer to entrance",
              "reward": "map_fragment"
            }
          }
        },
        {
          "id": "crystalGuardian",
          "type": "npc",
          "x": 17,
          "y": 20,
          "properties": {
            "dialogue": "These crystals are ancient. Do not disturb their slumber.",
            "role": "guard"
          }
        },
        {
          "id": "caveHermit",
          "type": "npc",
          "x": 24,
          "y": 11,
          "properties": {
            "dialogue": "The waters here hold ancient healing power. A small crystal offering will suffice.",
            "role": "healer"
          }
        },
        {
          "id": "echoSpirit",
          "type": "npc",
          "x": 26,
          "y": 13,
          "properties": {
            "dialogue": "Who... disturbs... the... silence...?",
            "role": "scholar"
          }
        },
        {
          "id": "luminousBeing",
          "type": "npc",
          "x": 19,
          "y": 23,
          "properties": {
            "dialogue": "You dare trespass in my sanctum!",
            "role": "boss",
            "bossData": {
              "health": 500,
              "abilities": ["crystal_shard_volley", "glowing_aura"],
              "loot": ["luminous_crystal", "boss_key"]
            }
          }
        },
        {
          "id": "exitToSurface",
          "type": "exit",
          "x": 6,
          "y": 3,
          "properties": {
            "targetMap": "surface_world",
            "targetX": 15,
            "targetY": 25
          }
        },
        {
          "id": "exitToDeepCaverns",
          "type": "exit",
          "x": 19,
          "y": 15,
          "properties": {
            "targetMap": "deep_caverns",
            "targetX": 5,
            "targetY": 5
          }
        },
        {
          "id": "crystalShard1",
          "type": "item",
          "name": "Crystal Shard",
          "description": "A small, glowing crystal shard.",
          "x": 11,
          "y": 11
        },
        {
          "id": "miningPick",
          "type": "item",
          "name": "Rusty Mining Pick",
          "description": "An old mining pick, still usable.",
          "x": 5,
          "y": 9
        },
        {
          "id": "rareCrystal",
          "type": "item",
          "name": "Rare Crystal",
          "description": "A beautifully faceted crystal, highly sought after.",
          "x": 18,
          "y": 17
        },
        {
          "id": "secret_wall_crystal_chamber",
          "name": "Crystalline Wall",
          "type": "secret_wall",
          "x": 25,
          "y": 25,
          "properties": {
            "hint": "The crystals here resonate with a strange harmony...",
            "requiresPuzzle": true,
            "puzzleType": "crystal_sequence"
          }
        },
        {
          "id": "crystal_red",
          "name": "Red Crystal",
          "type": "switch",
          "x": 24,
          "y": 24,
          "properties": {
            "switchGroup": "crystal_puzzle",
            "color": "red",
            "glows": true
          }
        },
        {
          "id": "crystal_blue",
          "name": "Blue Crystal",
          "type": "switch",
          "x": 26,
          "y": 24,
          "properties": {
            "switchGroup": "crystal_puzzle",
            "color": "blue",
            "glows": true
          }
        },
        {
          "id": "crystal_green",
          "name": "Green Crystal",
          "type": "switch",
          "x": 24,
          "y": 26,
          "properties": {
            "switchGroup": "crystal_puzzle",
            "color": "green",
            "glows": true
          }
        },
        {
          "id": "crystal_yellow",
          "name": "Yellow Crystal",
          "type": "switch",
          "x": 26,
          "y": 26,
          "properties": {
            "switchGroup": "crystal_puzzle",
            "color": "yellow",
            "glows": true
          }
        },
        {
          "id": "chest_prismatic_staff",
          "name": "Prismatic Chest",
          "type": "chest",
          "x": 25,
          "y": 27,
          "properties": {
            "items": ["prismatic_staff", "rainbow_gem"],
            "locked": true,
            "unlockCondition": "crystal_puzzle_complete"
          }
        },
        {
          "id": "secret_wall_mining_area",
          "name": "Cracked Wall",
          "type": "secret_wall",
          "x": 5,
          "y": 15,
          "properties": {
            "hint": "This wall shows signs of previous excavation attempts...",
            "revealedType": "passage"
          }
        },
        {
          "id": "npc_gemsmith_sparkle",
          "name": "Gemsmith Sparkle",
          "type": "npc",
          "x": 3,
          "y": 16,
          "properties": {
            "role": "merchant",
            "dialogueId": "dialogue_gemsmith_sparkle",
            "shopId": "gem_shop",
            "hidden": true
          }
        },
        {
          "id": "mining_node_1",
          "name": "Crystal Vein",
          "type": "mining_node",
          "x": 4,
          "y": 17,
          "properties": {
            "resource": "raw_crystal",
            "requiresTool": "crystal_pickaxe",
            "respawnTime": 300
          }
        },
        {
          "id": "secret_wall_mirror_chamber",
          "name": "Reflective Wall",
          "type": "secret_wall",
          "x": 15,
          "y": 20,
          "properties": {
            "hint": "Your reflection seems... different here.",
            "requiresPuzzle": true,
            "puzzleType": "mirror_reflection"
          }
        },
        {
          "id": "mirror_1",
          "name": "Crystal Mirror",
          "type": "rotatable_object",
          "x": 14,
          "y": 21,
          "properties": {
            "rotation": 0,
            "reflects": "light_beam"
          }
        },
        {
          "id": "mirror_2",
          "name": "Crystal Mirror",
          "type": "rotatable_object",
          "x": 16,
          "y": 21,
          "properties": {
            "rotation": 0,
            "reflects": "light_beam"
          }
        },
        {
          "id": "chest_ancient_vault",
          "name": "Ancient Vault",
          "type": "chest",
          "x": 15,
          "y": 22,
          "properties": {
            "items": ["ancient_codex", "time_crystal", "gold_1000"],
            "locked": true,
            "unlockCondition": "mirror_puzzle_complete"
          }
        },
        {
          "id": "secret_passage_lore_sanctum",
          "name": "Hidden Passage",
          "type": "secret_wall",
          "x": 20,
          "y": 5,
          "properties": {
            "hint": "Ancient runes glow faintly on this wall...",
            "revealedType": "door"
          }
        },
        {
          "id": "npc_crystal_sage",
          "name": "The Crystal Sage",
          "type": "npc",
          "x": 22,
          "y": 4,
          "properties": {
            "role": "lore_keeper",
            "dialogueId": "dialogue_crystal_sage",
            "grantsBlessing": "scholars_blessing",
            "hidden": true
          }
        },
        {
          "id": "lore_book_1",
          "name": "Tome of Origins",
          "type": "readable",
          "x": 21,
          "y": 3,
          "properties": {
            "content": "lore_crystal_origins",
            "glows": true
          }
        },
        {
          "id": "lore_book_2",
          "name": "Prophecy of the Void",
          "type": "readable",
          "x": 23,
          "y": 3,
          "properties": {
            "content": "lore_void_prophecy",
            "glows": true
          }
        }
      ]
    }
  ]
}
